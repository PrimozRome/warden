<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Warden by dre1080</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Warden</h1>
        <p>More than just a user database auth package for FuelPHP</p>

        <p class="view"><a href="https://github.com/dre1080/warden">View the Project on GitHub <small>dre1080/warden</small></a></p>


        <ul>
          <li><a href="https://github.com/dre1080/warden/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/dre1080/warden/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/dre1080/warden">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <p><img src="https://github.com/dre1080/warden/raw/gh-pages/assets/img/warden-logo-text.jpg" alt="Warden"></p>

<p>Latest release: 1.2 (<a href="https://github.com/dre1080/warden/blob/master/HISTORY.md">view changelog</a>)</p>

<p>For docs, and installation see <a href="http://dre1080.github.com/warden">http://dre1080.github.com/warden</a></p>

<p>For oAuth feature use the Warden adapter in <a href="https://github.com/happyninjas/fuel-ninjauth">Fuel NinjAuth</a>.</p>

<h2>Usage</h2>

<p>Check for validated login:</p>

<pre><code>if (Warden::check()) {
    echo "I'm logged in :D";
} else {
    echo "Failed, I'm NOT logged in :(";
}
</code></pre>

<p>Getting the currently logged in user:</p>

<pre><code>if (Warden::check()) {
    $current_user = Warden::current_user();
    echo $current_user-&gt;username;
}
</code></pre>

<p>Explicitly setting the current user:</p>

<pre><code>if (($user = Model_User::find(1))) {
    Warden::set_user($user);
}
</code></pre>

<p>Checking for a specific role:</p>

<pre><code>if (Warden::logged_in('admin')) {
    echo "Current user logged in as an admin";
}

$user = Model_User::find(2);
if (Warden::has_access(array('editor', 'moderator'), $user)) {
    echo "Hey, editor - moderator";
} else {
    echo "Fail!";
}
</code></pre>

<p>Checking the current user has permission for a resource:</p>

<pre><code>try {
    // Can the user create an article?
    Warden::authorize('create', 'Article');
} catch (Warden_AccessDenied $ex) {
    // Nope, get out
    die($ex-&gt;getMessage());
}
</code></pre>

<p>Log in a user by using a username or email and plain-text password:</p>

<pre><code>if (Input::method() === 'POST') {
    if (Warden::authenticate(Input::post('username_or_email'), Input::post('password'))) {
        Session::set_flash('success', 'Logged in successfully');
    } else {
        Session::set_flash('error', 'Username or password invalid');
    }
    Response::redirect();
}
</code></pre>

<p>Log in a user using a http based authentication method:</p>

<pre><code>if (($user_array = Warden::http_authenticate())) {
    echo "Welcome {$user_array['username']}";
}
</code></pre>

<p>Log out a user by removing the related session variables:</p>

<pre><code>if (Warden::logout()) {
     echo "I'm logged out";
}
</code></pre>

<p>Resetting a user's password</p>

<pre><code>// Sending the password token
if (($user = Model_User::find('first', array('where' =&gt; array('email' =&gt; 'myemail@warden.net'))))) {
    try {
        $user-&gt;send_reset_password_instructions();
    } catch (Exception $ex) {
        echo sprintf('Oops, something went wrong: %s', $ex-&gt;getMessage());
    }
}

// Resetting the password
try {
    if (($user = Model_User::reset_password_by_token(\Input::get('reset_password_token'), 'new_password'))) {
        echo 'Success!';
    } else {
        echo 'Not a valid user';
    }
} catch (Exception $ex) {
    // something went wrong
    echo sprintf('Oops, something went wrong: %s', $ex-&gt;getMessage());
}
</code></pre>

<p>More examples are in the doc comments for each method.</p>

<h2>Contributors</h2>

<p>Creator and lead developer: Andrew Wayne (Ando) <a href="https://github.com/dre1080" class="user-mention">@dre1080</a>.</p>

<p>Special thanks to <a href="https://github.com/craighooghiem" class="user-mention">@craighooghiem</a>, <a href="https://github.com/JesseObrien" class="user-mention">@JesseObrien</a>, <a href="https://github.com/Tenga" class="user-mention">@Tenga</a>, <a href="https://github.com/rclanan" class="user-mention">@rclanan</a>, <a href="https://github.com/aranw" class="user-mention">@aranw</a> and <a href="https://github.com/andreoav" class="user-mention">@andreoav</a> for contributing code, ideas and testing early versions.</p>

<p>Thanks also to the <a href="https://github.com/fuelphp" class="user-mention">@fuelphp</a> dev team + many who have contributed code, ideas and issues.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/dre1080">dre1080</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-29590272-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>